<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <title>Account Information</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="manifest" href="site.webmanifest">
  <link rel="apple-touch-icon" href="icon.png">
  <!-- Place favicon.ico in the root directory -->

  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/main.css">

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>

  <meta name="theme-color" content="#fafafa">
</head>

<body>
<!-- Main container -->
<div class="container container-fluid bg-dark">
  <div class="col-sm-2">
    <h1> </h1>
  </div>

  <!-- content window -->
  <div class="col-sm-auto">

    <!-- Page Header -->
    <div id="header">
      <script src="js/loadHeader.js"></script>
    </div>
    <br>
    <h3 class="text-white">Change Password:</h3>

    <!-- Search result -->
    <div id="UserInfo" class="text-white"></div>
    <form method="post" id="ModifyForm" >

      <label class="text-white">Password:  <input class="form-control" type="password" name="passwordHash" id="password"></label><br>

      <label class="text-white">Confirm Password:  <input class="form-control" type="password" name="passwordHashCheck" id="confirmpassword"></label><br>

    </form>
    <button class="btn" id="ModifyButton">Change Password</button>
  <br><br>

    <script>
        let param=location.search.substring(5);
        param=decodeURIComponent(param);

        function handleMsg(msg) {
            alert(msg);

            // redirect to login if register succeeded
            if (msg.charAt(0) === "P"&& param==""){
                window.location.replace("AccountInfo.html");
            }else
            {
                window.location.replace("browseusers.html");
            }
        }
        //create account
        $('#ModifyButton').click(function() {
            let result = $.ajax({
                async: true,
                type: "POST",
                url: "php/Modify.php",
                timeout:5000,
                data: {
                    user: param,
                    passwordHash: $('#password').val(),
                    passwordHashCheck: $('#confirmpassword').val()
                }
            });

            result.always(handleMsg);
        });
    </script>

    <!-- Page Footer -->
    <div class="row bg-secondary container-fluid text-center" id="footer">
      <script src="js/loadFooter.js"></script>
    </div>
  </div>
  <div class="col-sm-2">
    <h1> </h1>
  </div>
</div>

<script src="js/vendor/modernizr-3.7.1.min.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-3.4.1.min.js"><\/script>')</script>
<script src="js/plugins.js"></script>
<script src="js/main.js"></script>

<!-- Google Analytics: change UA-XXXXX-Y to be your site's ID. -->
<script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-XXXXX-Y', 'auto'); ga('set','transport','beacon'); ga('send', 'pageview')
</script>
<script src="https://www.google-analytics.com/analytics.js" async></script>
</body>

</html>
